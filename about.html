<!DOCTYPE html>
<html lang="en" id="html-root">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="About Md Fahim, Doing something" />
    <title>About | Academic Profile</title>

    <!-- Fonts & Tailwind -->
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="styles/animations.css" />
    <script src="https://cdn.tailwindcss.com?plugins=typography,forms"></script>
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>

    <script>
      tailwind.config = {
        darkMode: "class",
        theme: {
          extend: {
            fontFamily: { sans: ["Inter", "system-ui", "sans-serif"] },
            typography: ({ theme }) => ({
              custom: {
                css: {
                  "--tw-prose-body": theme("colors.slate[600]"),
                  "--tw-prose-headings": theme("colors.slate[800]"),
                  "--tw-prose-links": theme("colors.teal[600]"),
                  "--tw-prose-bold": theme("colors.slate[800]"),
                  "--tw-prose-bullets": theme("colors.slate[400]"),
                  "--tw-prose-hr": theme("colors.slate[200]"),
                  "--tw-prose-quotes": theme("colors.slate[800]"),
                  "--tw-prose-quote-borders": theme("colors.teal[300]"),

                  "--tw-prose-invert-body": theme("colors.slate[300]"),
                  "--tw-prose-invert-headings": theme("colors.slate[100]"),
                  "--tw-prose-invert-links": theme("colors.teal[400]"),
                  "--tw-prose-invert-bold": theme("colors.slate[100]"),
                  "--tw-prose-invert-bullets": theme("colors.slate[600]"),
                  "--tw-prose-invert-hr": theme("colors.slate[700]"),
                  "--tw-prose-invert-quotes": theme("colors.slate[100]"),
                  "--tw-prose-invert-quote-borders": theme("colors.teal[700]"),
                },
              },
            }),
          },
        },
      };
    </script>
  </head>

  <body
    class="font-sans bg-slate-50 text-slate-700 dark:bg-slate-900 dark:text-slate-300 min-h-screen flex flex-col transition-colors duration-300"
  >
    <div id="header-partial"></div>

    <main
      class="flex-1 w-full max-w-6xl mx-auto px-4 pb-10 flex flex-col lg:flex-row gap-12 pt-28"
    >
      <!-- SIDEBAR -->
      <aside class="w-full lg:w-80 flex-shrink-0 lg:sticky lg:top-24 h-fit">
        <div
          class="rounded-2xl bg-white/50 dark:bg-slate-800/50 backdrop-blur-lg shadow-lg border border-slate-200 dark:border-slate-700 p-6 flex flex-col items-center text-center gap-4"
        >
          <div
            class="p-1 rounded-full bg-gradient-to-tr from-teal-400 to-cyan-400 mb-2"
          >
            <img
              src="assets/images/profile.jpeg"
              alt="Profile photo of Md Fahim"
              class="w-32 h-32 rounded-full border-4 border-white dark:border-slate-800 shadow-md object-cover"
            />
          </div>
          <h1 class="text-2xl font-bold text-teal-600 dark:text-teal-300">
            Md Fahim
          </h1>
          <p class="text-sm text-slate-500 dark:text-slate-400 -mt-2">
            Exploring Life
          </p>
          <p class="text-sm text-slate-400 dark:text-slate-500 italic">
            "Keep Learning"
          </p>
          <div class="flex flex-wrap justify-center gap-x-4 gap-y-2 pt-2">
            <a
              href="mailto:fahimcse381@gmail.com"
              class="flex items-center gap-2 text-slate-600 dark:text-slate-300 hover:text-teal-500 dark:hover:text-teal-300 text-sm transition-colors"
            >
              <i data-lucide="mail" class="w-4 h-4"></i>Email
            </a>
            <a
              href="https://github.com/md-fahim"
              target="_blank"
              rel="noopener"
              class="flex items-center gap-2 text-slate-600 dark:text-slate-300 hover:text-teal-500 dark:hover:text-teal-300 text-sm transition-colors"
            >
              <i data-lucide="github" class="w-4 h-4"></i>GitHub
            </a>
            <a
              href="https://www.linkedin.com/in/md-fahim-1a159b373/"
              target="_blank"
              rel="noopener"
              class="flex items-center gap-2 text-slate-600 dark:text-slate-300 hover:text-teal-500 dark:hover:text-teal-300 text-sm transition-colors"
            >
              <i data-lucide="linkedin" class="w-4 h-4"></i>LinkedIn
            </a>
          </div>
        </div>
      </aside>

      <!-- MAIN CONTENT -->
      <div class="flex-1 flex flex-col gap-8">
        <section
          id="about-main"
          class="rounded-2xl bg-white/50 dark:bg-slate-800/50 backdrop-blur-lg shadow-lg border border-slate-200 dark:border-slate-700 p-6 flex flex-col gap-2 transition-all duration-300 hover:shadow-xl hover:-translate-y-1"
        >
          <h2 class="text-xl font-bold text-teal-600 dark:text-teal-300 mb-2">
            About Me
          </h2>
          <p
            class="text-base text-slate-600 dark:text-slate-300 leading-relaxed"
          >
            I'm a passionate researcher and developer with a strong interest in
            building intelligent systems that can learn and reason. My current
            focus is on exploring the frontiers of AI.
          </p>
          <p
            class="text-base text-slate-600 dark:text-slate-300 leading-relaxed pt-2"
          >
            <strong>Research Interests:</strong>
            <span class="font-semibold text-teal-700 dark:text-teal-400">
              Artificial Intelligence, Machine Learning, Data Science, Deep
              Learning, LLMs, Agentic Systems
            </span>
          </p>
        </section>

        <!-- DYNAMIC SECTIONS -->
        <div id="dynamic-content-container" class="flex flex-col gap-8"></div>
      </div>
    </main>

    <div id="footer-partial"></div>

    <script src="scripts/partials.js"></script>
    <script>
      // Utility to escape HTML safely
      const escapeHtml = (unsafe) =>
        unsafe
          ? unsafe
              .replace(/&/g, "&amp;")
              .replace(/</g, "&lt;")
              .replace(/>/g, "&gt;")
              .replace(/"/g, "&quot;")
              .replace(/'/g, "&#039;")
          : "";

      // Create section card
      const createSectionCard = (id, icon, title) => {
        const section = document.createElement("section");
        section.id = `${id}-section`;
        section.className =
          "rounded-2xl bg-white/50 dark:bg-slate-800/50 backdrop-blur-lg shadow-lg border border-slate-200 dark:border-slate-700 p-6 flex flex-col transition-all duration-300 hover:shadow-xl hover:-translate-y-1";

        section.innerHTML = `
          <div class="flex items-center gap-3 mb-4">
            <i data-lucide="${icon}" class="w-6 h-6 text-teal-500 dark:text-teal-400"></i>
            <h2 class="text-xl font-semibold text-teal-600 dark:text-teal-400">${title}</h2>
          </div>
          <div id="${id}-content" class="flex flex-col gap-4"></div>
        `;
        return section;
      };

      const sections = [
        {
          id: "news",
          icon: "users",
          title: "Recent News",
          file: "content/co_curricular.md",
          type: "markdown",
        },
        {
          id: "selected_pub",
          icon: "award",
          title: "Selected Publications",
          file: "content/selected_publications.md",
          type: "publication",
        },
      ];

      const container = document.getElementById("dynamic-content-container");

      // Load each section
      sections.forEach((sec) => {
        const card = createSectionCard(sec.id, sec.icon, sec.title);
        container.appendChild(card);

        if (sec.type === "markdown") {
          fetch(sec.file)
            .then((res) => res.text())
            .then((md) => {
              document.getElementById(`${sec.id}-content`).innerHTML =
                marked.parse(md);
              lucide.createIcons();
            });
        } else if (sec.type === "publication") {
          fetch(sec.file)
            .then((res) => res.text())
            .then((text) => {
              const entries = text
                .split(/\n-{3,}\n/)
                .filter((b) => b.trim().length > 0)
                .map((block) => {
                  const lines = block.split("\n");
                  const f = {};
                  let currentKey = null;

                  lines.forEach((line) => {
                    line = line.trim();
                    if (line.startsWith("[") && line.endsWith("]")) {
                      currentKey = line
                        .replace(/\[|\]/g, "")
                        .trim()
                        .toLowerCase();
                      f[currentKey] = "";
                    } else if (currentKey && line !== "") {
                      f[currentKey] += (f[currentKey] ? " " : "") + line;
                    }
                  });

                  return f;
                });

              const rendered = entries
                .map((f) => {
                  const imgHtml = f.image
                    ? `<img src="${f.image}" alt="${escapeHtml(
                        f.title
                      )}" class="w-32 h-32 rounded-lg object-cover border border-slate-200 dark:border-slate-700" />`
                    : "";

                  const titleHtml = f.title
                    ? `<div class="font-bold text-base text-slate-800 dark:text-white">${escapeHtml(
                        f.title
                      )}</div>`
                    : "";

                  const venueHtml = f.venue
                    ? `<div class="text-sm italic text-slate-500 dark:text-slate-400 mt-1">${escapeHtml(
                        f.venue
                      )}</div>`
                    : "";

                  const authorHtml = f.author
                    ? `<div class="text-sm text-slate-600 dark:text-slate-400">${escapeHtml(
                        f.author
                      )}</div>`
                    : "";

                  const yearHtml = f.year
                    ? `<div class="text-slate-600 dark:text-slate-400 ml-auto pl-4">${escapeHtml(
                        f.year
                      )}</div>`
                    : "";

                  const buttons = [];
                  if (f.code)
                    buttons.push(
                      `<a href="${f.code}" target="_blank" class="text-teal-600 dark:text-teal-400 text-sm font-medium hover:underline">[Code]</a>`
                    );
                  if (f.paper)
                    buttons.push(
                      `<a href="${f.paper}" target="_blank" class="text-teal-600 dark:text-teal-400 text-sm font-medium hover:underline">[Paper]</a>`
                    );
                  if (f.bib)
                    buttons.push(
                      `<button onclick="navigator.clipboard.writeText(\`${escapeHtml(
                        f.bib
                      )}\`)" class="text-teal-600 dark:text-teal-400 text-sm font-medium hover:underline">[BIB]</button>`
                    );

                  const buttonHtml = buttons.length
                    ? `<div class="flex gap-3 mt-2">${buttons.join("")}</div>`
                    : "";

                  return `
                    <div class="flex gap-4 border border-slate-200 dark:border-slate-700 rounded-xl p-4 bg-white/50 dark:bg-slate-800/50 hover:shadow-md transition">
                      ${imgHtml}
                      <div class="flex-1 flex flex-col">
                        <div class="flex flex-col sm:flex-row items-start sm:items-center justify-between gap-2 sm:gap-0">
                          ${titleHtml}
                          ${yearHtml}
                        </div>
                        ${venueHtml}
                        ${authorHtml}
                        ${buttonHtml}
                      </div>
                    </div>`;
                })
                .join("");

              document.getElementById(`${sec.id}-content`).innerHTML = rendered;
              lucide.createIcons();
            });
        }
      });
    </script>
  </body>
</html>
